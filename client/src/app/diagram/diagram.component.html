<div>

  <app-nav-bar></app-nav-bar>

  <div style="overflow: hidden">
    <svg [attr.width]="width"
         [attr.height]="height"
         [attr.viewBox]="zoomService.getViewBox()"
         (mousedown)="handleMouseDown($event)"
         (mouseup)="handleMouseUp($event)"
         (mousemove)="handleMouseMove($event)"
         id="diagram"
         style="overflow: hidden">
      <g grid-overlay></g>

      <defs arrow-marker></defs>

      <g *ngFor="let node of diagram.nodes" node-component [node]="node"/>

      <g *ngFor="let edge of diagram.edges; let i = index"
         edge-component [(edge)]="diagram.edges[i]" (edgeChange)="diagram.edges[i]=$event"></g>

      <g selected-node-highlight/>
      <g drag-select-preview/>
      <g drag-drop-preview></g>

      <svg:g *ngFor="let node of diagram.nodes">
        <svg:g *ngIf="edgeCreationIsActive" clickable-attachment-points [node]="node"/>
      </svg:g>
      <g new-edge-preview></g>
    </svg>
  </div>

  <creation-sidebar id="menu-side"></creation-sidebar>
  <hint-overlay></hint-overlay>
</div>

<canvas id="canvas" viewbox></canvas>
